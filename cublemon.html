<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sky Surfer</title>
<style>
body { margin:0; overflow:hidden; background:#0a0a2a; }
canvas { display:block; margin:0 auto; background: linear-gradient(#0a0a2a, #1a1a5a); }
#score { position:absolute; top:10px; left:10px; color:white; font-family:sans-serif; font-size:24px; }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="600" height="800"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreDiv = document.getElementById('score');

let score = 0;

// ==== PLAYER ====
const player = {x:300, y:700, width:40, height:40, color:'#00ffff', vx:0, vy:0, gravity:0.5, jumpPower:-12};

// ==== CONTROLES ====
const keys = {};
document.addEventListener('keydown', e=>keys[e.key.toLowerCase()]=true);
document.addEventListener('keyup', e=>keys[e.key.toLowerCase()]=false);

// ==== OBSTÁCULOS ====
const obstacles = [];
const stars = [];

// ==== FUNÇÕES ====
function spawnObstacle(){
    const width = 60 + Math.random()*40;
    const height = 20;
    const x = Math.random()*(canvas.width-width);
    obstacles.push({x,y:-20,width,height,color:'#ff3333'});
}
function spawnStar(){
    const size = 15;
    const x = Math.random()*(canvas.width-size);
    stars.push({x,y:-20,size,color:'#ffff00'});
}

// ==== LOOP ====
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // === CONTROLES ===
    if(keys['a'] || keys['arrowleft']) player.vx=-7;
    else if(keys['d'] || keys['arrowright']) player.vx=7;
    else player.vx=0;

    if((keys[' '] || keys['w'] || keys['arrowup']) && player.y+player.height>=canvas.height) player.vy=player.jumpPower;

    player.vy += player.gravity;
    player.y += player.vy;
    player.x += player.vx;

    if(player.y+player.height>canvas.height) player.y=canvas.height-player.height;
    if(player.x<0) player.x=0;
    if(player.x+player.width>canvas.width) player.x=canvas.width-player.width;

    // === OBSTACULOS ===
    if(Math.random()<0.02) spawnObstacle();
    obstacles.forEach((o,i)=>{
        o.y +=4;
        ctx.fillStyle=o.color;
        ctx.fillRect(o.x,o.y,o.width,o.height);

        // colisão
        if(player.x<o.x+o.width && player.x+player.width>o.x &&
           player.y<o.y+o.height && player.y+player.height>o.y){
            alert("Game Over! Score: "+score);
            document.location.reload();
        }

        if(o.y>canvas.height) obstacles.splice(i,1);
    });

    // === STARS ===
    if(Math.random()<0.01) spawnStar();
    stars.forEach((s,i)=>{
        s.y +=4;
        ctx.fillStyle=s.color;
        ctx.beginPath();
        ctx.arc(s.x+s.size/2,s.y+s.size/2,s.size/2,0,Math.PI*2);
        ctx.fill();

        // coletar
        if(player.x<s.x+s.size && player.x+player.width>s.x &&
           player.y<s.y+s.size && player.y+player.height>s.y){
            score +=10;
            stars.splice(i,1);
        }

        if(s.y>canvas.height) stars.splice(i,1);
    });

    // === PLAYER ===
    ctx.fillStyle=player.color;
    ctx.fillRect(player.x,player.y,player.width,player.height);

    // === SCORE ===
    scoreDiv.textContent="Score: "+score;

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
